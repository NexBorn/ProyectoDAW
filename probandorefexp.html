<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="keywords" content="Viajes, Explora,  html"/>
    <link rel="stylesheet" href="assets/css/styles.css">
    <link href='https://fonts.googleapis.com/css?family=Poppins' rel='stylesheet'>
    <title>Prueba de RegExp</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <style>
        .row > [class^="col-"] {
            padding-top: .75rem;
            padding-bottom: .75rem;
            background-color: rgba(39, 41, 43, 0.03);
            border: 1px solid rgba(39, 41, 43, 0.1);
        }

        .cgealert {
            position: relative;
            padding: 0.3rem 0.3rem;
            margin-bottom: 1rem;
            border: 1px solid transparent;
            border-radius: 0.25rem;
        }

        .cgealert-success {
            color: #0f5132;
            background-color: #d1e7dd;
            border-color: #badbcc;
        }

        .cgealert-danger {
            color: #842029;
            background-color: #f8d7da;
            border-color: #f5c2c7;
        }
    </style>
</head>
<body>
    <header class="big-header-explora">
        <nav>
            <a href="Rendón%20Quijije%20Iván%20Alexander.html"><img src="assets/img/logo.png" alt="logo"></a>
            <div class="nav-links">
                <ul>
                    <li><a href="index.html">Inicio</a></li>
                    <li><a href="Cantos%20Pinto%20James%20Douglas.html">Bioseguridad</a></li>
                    <li><a href="Beltrán%20Santistevan%20Carlos%20Steven.html">Explora</a></li>
                    <li><a href="Reyes%20Toala%20Nefi%20Javier.html">Conoce</a></li>
                    <li><a href="Gonzalez_Espinoza_Christian_Eduardo.html">Precios</a></li>
                </ul>
            </div>
        </nav>
    </header>
    <main class="container-md" Style="padding-top: .75rem;">
        <div class="align-item-center">
            <form id="form">
                <div class="input-group mb-3">
                    <span class="input-group-text">regexp: </span>
                    <input type="text" class="form-control" placeholder="regexp" aria-label="regexp" id="regexp" />
                </div>
                <div class="input-group mb-3">
                    <span class="input-group-text">valor: </span>
                    <input type="text" class="form-control" placeholder="valor" aria-label="Evaluar"
                           aria-describedby="basic-addon1" id="valor" />
                </div>
                <div class="input-group mb-3">
                    <input type="submit" name="Enviar" id="submit" />
                </div>
            </form>
        </div>
    </main>
    <script type="text/javascript" src="assets/bootstrap/js/jquery-3.6.0.min.js"></script>
    <script type="text/javascript" src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script>
        var form = document.querySelector("#form");
        form.addEventListener('submit', validar);

        function resultadoseguro(resultado, valoractual) {
            return valoractual && resultado;
        }

        function esVacio(txt, min, max, regexp) {
            console.log(txt);
            resultado = "";
            if (txt.value === '') {
                resultado = "es requerido";
            }
            else if (!regexp.test(txt.value)) { //letra.test(txtNombres.value)
                resultado = "solo debe contener letras";
            }
            else if (txt.value.length < min) {
                resultado = "minimo " + min + " caracteres";
            }
            else if (txt.value.length > max) {
                resultado = "maximo " + max + " caracteres";
            }
            return resultado;
        }

        function limpiarMensajes() {
            var mensajes = document.querySelectorAll(".cgealert");
            for (let i = 0; i < mensajes.length; i++) {
                mensajes[i].remove();// remueve o elimina un elemento de mi doc html
            }
        }

        function mensaje(elemento, nombre, cadenaMensaje) {
            if (cadenaMensaje.length > 0) {
                elemento.focus();
                var nodoPadre = elemento.parentNode;
                var nodoMensaje = document.createElement("span");
                nodoMensaje.textContent = nombre + " " + cadenaMensaje;
                //nodoMensaje.style.color = "red";
                nodoMensaje.display = "block";
                nodoMensaje.setAttribute("class", "cgealert cgealert-danger");
                nodoPadre.appendChild(nodoMensaje);
            } else {
                elemento.focus();
                var nodoPadre = elemento.parentNode;
                var nodoMensaje = document.createElement("span");
                nodoMensaje.textContent = nombre + " es correcto";
                //nodoMensaje.style.color = "red";
                //nodoMensaje.display = "block";
                nodoMensaje.setAttribute("class", "cgealert cgealert-success");
                nodoPadre.appendChild(nodoMensaje);
            }
        }

        function validar(event) {
            limpiarMensajes();
            var resultado = true;
            var strResult = "";
            var txtregexp = document.getElementById("regexp");
            var txtvalor = document.getElementById("valor");

            var regexp = new RegExp(txtregexp.value);

            resultado = evaluatxt(txtvalor, 0, 50, regexp, "El valor", resultado);

            if (!resultado) {
                //event.preventDefault();  // detener el evento  //stop form from submitting
                alert("Errrorr");
            } else {
                alert("Datos correctos");
            }
            event.preventDefault();
            return resultado;
        }
        function evaluatxt(txt, min, max, regexp, nombre, resultado) {
            strResult = esVacio(txt, 0, 10, /[a-z]+/gi);
            var bool = strResult.length === 0;
            mensaje(txt, nombre, strResult);
            return resultadoseguro(resultado, bool);
        }
    </script>



</body>
</html>